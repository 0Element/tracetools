{% extends 'index.html' %}
{% load staticfiles %}
{% block content %}
<div class="widget stacked">
  <div class="widget-header">
    <h2 class="widget-header-title">Reverse Whois Lookup</h2>
  </div>
  <div class="widget-content">
    <form name="WhoIsForm" autocomplete="off" method="post" action="{% url 'who-is'%}">
      {% csrf_token %}
      <div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <div class="input-group {% if form.ip_or_domain.errors %}has-error{% endif %}"><span class="input-group-addon"><i class="icon-globe" aria-hidden="true" id="input_icon"></i></span>
          <input id="id_ip_or_domain" autofocus type="text" name="ip_or_domain" value="{{ form.ip_or_domain.value|default:'' }}" class="form-control" />
        </div>
        {% if form.ip_or_domain.errors %}
        <ol>
          {% for error in form.ip_or_domain.errors %}
          <li class="field-error"><strong class="text-danger">{{ error|escape }}</strong></li>
          {% endfor %}
        </ol>
        {% endif %}
        <p class="help-block">
          {{ form.ip_or_domain.help_text }}
        </p>
      </div>
      <div class="form-group col-xs-12 col-sm-12 col-md-12 col-lg-12">
        <button type="submit" class="btn btn-outline btn-success">Search</button>
        <button type="reset" class="btn btn-outline btn-default" id="reset_button" data-input-id="id_ip_or_domain">Reset</button>
      </div>
    </form>

    {% if result %}
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
      <div class="panel-body ns-result-block">
        <div class="col-xs-9">
          <h5 class="ns-result-text"><strong>Country</strong></h5>
        </div>
        <div class="col-xs-3 ">
          <i class="icon-compass text-danger icon-2 pull-right"></i>
        </div>
        <div class="col-xs-9">
          <span class="text-muted break-all">
            {% if result.country %}
                {{ result.country }}
            {% else %}
                {{ result.country_code }}
            {% endif %}
          </span>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
      <div class="panel-body ns-result-block">
        <div class="col-xs-9">
          <h5 class="ns-result-text"><strong>City</strong></h5>
        </div>
        <div class="col-xs-3 ">
          <i class="icon-compass text-danger icon-2 pull-right"></i>
        </div>
        <div class="col-xs-9">
          <span class="text-muted break-all">{{ result.city|default:'Unknown' }}</span>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4">
      <div class="panel-body ns-result-block">
        <div class="col-xs-9">
          <h5 class="ns-result-text"><strong>IP address</strong></h5>
        </div>
        <div class="col-xs-3 ">
          <i class="icon-compass text-danger icon-2 pull-right"></i>
        </div>
        <div class="col-xs-9">
          <span class="text-muted break-all">{{ result.ip }}</span>
        </div>
      </div>
    </div>
    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
      <div class="table-responsive">
        <table cellpadding="1" cellspacing="1" class="table">
          <thead>
            <tr>
              <th></th>
              <th></th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Country
                </strong>
              </td>
              <td>
                {% if result.country %}
                    {{ result.country }} ({{ result.country_code }})
                {% else %}
                    {{ result.country_code|default:'Unknown' }}
                {% endif %}
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Date
                 </strong>
              </td>
              <td>{{ result.date|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary nowrap">
                  <i class="icon-globe m-r"></i>
                   IP address
                </strong>
              </td>
              <td>{{ result.ip|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Abstract Syntax Notation
                </strong>
              </td>
              <td>{{ result.asn|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Registration Notation
                </strong>
              </td>
              <td>{{ result.asnr|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Domain Notation
                </strong>
              </td>
              <td>{{ result.asncidr|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Updated
                </strong>
              </td>
              <td>{{ result.updated|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Handle
                </strong>
              </td>
              <td>{{ result.handle|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Description
                </strong>
              </td>
              <td>{{ result.description|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Postal
                </strong>
              </td>
              <td>{{ result.postal_code|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Address
                </strong>
              </td>
              <td>{{ result.address|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   City
                </strong>
              </td>
              <td>{{ result.city|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Name
                </strong>
              </td>
              <td>{{ result.name|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Created
                </strong>
              </td>
              <td>{{ result.created|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   State
                </strong>
              </td>
              <td>{{ result.state|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Range
                </strong>
              </td>
              <td>{{ result.ip_range|default:'Unknown' }}</td>
              <td></td>
            </tr>
            <tr>
              <td>
                <strong class="text-primary">
                  <i class="icon-globe m-r"></i>
                   Classless Inter-Domain Routing
                </strong>
              </td>
              <td>{{ result.cidr|default:'Unknown' }}</td>
              <td></td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    {% endif %}
  </div>
</div>
{% endblock %}
